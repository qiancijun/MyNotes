# 一、Shell
Shell 是一个命令行解释器，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序，用户可以用 Shell 来启动、挂起、停止甚至是编写一些程序.

# 二、Shell语法



## 2.1  脚本格式要求

1. 脚本以#!/bin/bash 开头
2. 脚本需要有可执行权限



## 2.2 脚本的常用执行方式

1. 输入脚本的绝对路径或相对路径
    * 首先要赋予 helloworld.sh 脚本的+x 权限
    * 执行脚本

## 2.3 变量

1. Linux Shell 中的变量分为，系统变量和用户自定义变量。
    * 系统变量：$HOME、$PWD、\$SHELL、$USER 等等
    * 显示当前 shell 中所有变量：set



### 2.3.1 变量的定义

* 定义变量：变量=值
* 撤销变量：unset 变量
* 声明静态变量：readonly 变量，注意：不能 unset



### 2.3.2 变量定义的规则

1. 变量名称可以由字母、数字和下划线组成，但是不能以数字开头。
2. 等号两侧不能有空格
3. 变量名称一般习惯为大写



### 2.3.3 将命令的返回值赋给变量

* A=\`ls -la` 反引号，运行里面的命令，并把结果返回给变量 A

* A=$(ls -la) 等价于反引号



### 2.3.4 设置环境变量

* export 变量名=变量值 （功能描述：将 shell 变量输出为环境变量）
* source 配置文件（功能描述：让修改后的配置信息立即生效）
* echo $变量名（功能描述：查询环境变量的值）

### 2.3.5 位置参数变量

当我们执行一个 shell 脚本时，如果希望获取到命令行的参数信息，就可以使用到位置参数变量，比如 ： ./myshell.sh 100 200 , 这个就是一个执行 shell 的命令行，可以在 myshell 脚本中获取到参数信息

* 基本语法
    * \$* （功能描述：这个变量代表命令行中所有的参数，$*把所有的参数看成一个整体）
    * \$@（功能描述：这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待）
    * $#（功能描述：这个变量代表命令行中所有参数的个数）



### 2.3.6 预定义变量

* 基本语法

    * $$ （功能描述：当前进程的进程号（PID））
    * $!  （功能描述：后台运行的最后一个进程的进程号（PID））
    * $？ （功能描述：最后一次执行的命令的返回状态。如果这个变量的值为 0，证明上一个命令正确执行；如果这个变量的值为非 0（具体是哪个数，由命令自己来决定），则证明上一个命令执行不正确了。）






## 2.4 运算符

* 基本语法：
    * $((运算式))
    * $[运算式]
    * expr m + n（注意 expr 运算符间要有空格）



## 2.5 条件判断

* 基本语法
    * [ condition ]（注意 condition 前后要有空格）
    * （\#非空返回 true，可使用$?验证（0 为 true，>1 为 false）
* 常用判断条件
    * = 字符串比较
    * -lt 小 于
    * -le 小于等于
    * -eq 等 于
    * -gt 大 于
    * -ge 大于等于
    * -ne 不等于
* 按照文件权限进行判断
    * -r 有读的权限 [ -r 文件 ]
    * -w 有写的权限
    * -x 有执行的权限
* 按照文件类型进行判断
    * -f 文件存在并且是一个常规的文件
    * -e 文件存在
    * \-d 文件存在并是一个目录



## 2.6 流程控制



### 2.6.1 if 判断

* 基本语法

    ``` shell
    if [ 条件判断式 ];then
    	要执行的代码
    fi
    
    或者
    
    if [ 条件判断式 ]
    then 
    	要执行的代码
    elif [ 条件判断式 ]
    then
    	要执行的代码
    fi
    ```

> [ 条件判断式 ]，中括号和条件判断式之间必须有空格 ，推荐使用第二种方式



### 2.6.2 for循环

* 基本语法

    ``` shell
    for 变 量 in 值 1 值 2 值 3…
    do
    	程序
    done
    或者
    for (( 初始值;循环控制条件;变量变化 ))
    do
    	程序
    done
    
    ```

### 2.6.3 while循环

* 基本语法

    ``` shell
    while [ 条件判断式 ]
    do
    	程序
    done
    ```

    

 

## 2.7 read 读取控制台输入

* 基本语法

    ``` shell
    read(选项)(参数)
    -p：指定读取值时的提示符；
    -t：指定读取值时等待的时间（秒），如果没有在指定的时间内输入，就不再等待了。。参数
    变量：指定读取值的变量名
    ```

    

## 2.8 函数



### 2.8.1 系统函数

* basename 基本语法

    ``` shell
    basename [pathname] [suffix]
    # 功能：返回完整路径最后 / 的部分，常用于获取文件名
    # suffix 为后缀，如果 suffix 被指定了，basename 会将 pathname 或 string 中的 suffix 去掉。
    ```

* dirname 基本语法

    ``` shell
    dirname 文件绝对路径
    # 功能：返回完整路径最后 / 的前面的部分，常用于返回路径部分
    # 从给定的包含绝对路径的文件名中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分）
    ```

    