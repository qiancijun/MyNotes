# 一、Hadoop



## 1.1 Hadoop运行环境搭建（开发重点）

### 1.1.1 虚拟机环境准备

 1. 克隆虚拟机

 2. 修改克隆虚拟机的静态ip

 3. 修改主机名

 4. 关闭防火墙

 5. 创建用户

 6. 配置用户具有root权限

     1. `vim /etc/sudoers`

        ![](E:\Study\MyNotes\Hadoop\Linux-权限.png)

 7. 在`/opt`目录下创建文件夹

     1. 在`/opt`目录下创建module、software文件夹

     2. 修改module、software文件夹的所有者cd

     3. ```
        sudo chown 用户名:用户名 文件名
        ```



* 确保虚拟机与主机在同一网关下

    * windows ipconfig查看主机网关

        ![](E:\Study\MyNotes\Hadoop\Windows-主机网关.png)

    * 修改VMnet8网络配置

        ![](E:\Study\MyNotes\Hadoop\Windows-VMnet8.png)

    * 修改VMware虚拟网络地址

        ![](E:\Study\MyNotes\Hadoop\VMware配置.png)

* 设置静态ip，并且添加上本机ip地址`/etc/systemconfig/network-scripts/ifcfg-网卡名`

    ![](E:\Study\MyNotes\Hadoop\Linux-虚拟机环境配置1.png)

* 修改本机主机名称

    ```
    hostnamectl set-hostname xxx
    ```

* 修改/etc/hosts文件

    ![](E:\Study\MyNotes\Hadoop\Linux-虚拟机环境配置2.png)

### 1.1.2 安装JDK

1. 往`/opt/software`下传入jdk

2. 解压tar包

    * `tar -zxvf jdk文件名 -C /opt/module`

3. 配置JAVA_HOME

    * `sudo vim /etc/profile`

    * `shift + g`跳转到最后一行

    * ```
        export JAVA_HOME=jdk路径
        export PATH=$PATH:$JAVA_HOME/bin
        ```

    * 刷新profile文件`soruce /etc/profile`

    * `java -version`测试是否成功

### 1.1.3 安装Hadoop

1. 往`/opt/software`下传入源码文件

2. 解压tar包，同jdk方法

3. 配置HADOOP_HOME

    * ```
        export HADOOP_HOME=hadoop路径
        export PATH=$PATH:$HADOOP_HOMT/bin
        export PATH=$PATH:$HADOOP_HOMT/sbin
        ```

    * 刷新profile文件`soruce /etc/profile`

    * `hadoop`测试是否成功



## 1.2 Hadoop运行模式

Hadoop运行模式包括：本地模式、伪分布式模式以及完全分布式模式



### 1.2.1 本地运行模式

运行案例：

```
mkdir input
cp etc/hadoop/*.xml input
hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.10.1.jar grep input output 'dfs[a-z.]+'
```

运行成功后，目录下会多出一个output文件夹

![](E:\Study\MyNotes\Hadoop\Hadoop-本地模式案例.png)





### 1.2.2 官方WordCount案例

1. 在hadoop文件夹下面创建一个wcinput文件夹

    ```
    mkdir wcinput
    ```

    

2. 在wcinput文件下创建一个`wc.input`文件

3. 编辑`wc.input`文件，输入以下内容

    ``` 
    qiancijun
    Qianci
    Hello qiancijun
    Hello Qianci
    Bye qiancijun
    Bye Bye
    ```

4. 执行启动命令

    ```
    hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-2.10.1.jar wordcount wcininput/ wcoutput
    ```

5. 查看结果

    ![](E:\Study\MyNotes\Hadoop\Hadoop-官方WordCount案例.png)